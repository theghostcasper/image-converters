"use strict";var r=null;function e(e,n){var o=new Image;o.src=e,o.onload=function(){var e=document.createElement("canvas");e.width=o.width,e.height=o.height,e.getContext("2d").drawImage(o,0,0),n(e)}}function c(e,n){var o=document.createElement("a");return o.href=e.toDataURL("image/"+n),o.download="output"+(new Date).toString().slice(0,24)+"."+n,o}function u(){["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(e){document.querySelector(".dragUpload").addEventListener(e,function(e){e.preventDefault(),e.stopPropagation()})}),["dragover","dragenter"].forEach(function(e){document.querySelector(".dragUpload").addEventListener(e,function(e){document.querySelector(".dragUpload").classList.add("dragged")})}),["dragleave","dragend","drop"].forEach(function(e){document.querySelector(".dragUpload").addEventListener(e,function(e){document.querySelector(".dragUpload").classList.remove("dragged")})})}function n(t,n,d){function o(e,n){if(!(n=n||e.target.files[0]).type.match("image/"+(d||t)))return document.querySelector(".alert").style.display="block",document.querySelector(".done-convert").classList.remove("green-text"),document.querySelector(".done-drag").classList.remove("green-text"),document.querySelector(".convert").classList.add("disabled"),document.querySelector(".convert").classList.add("grey"),document.querySelector(".convert").classList.remove("green"),document.querySelector(".thumb-img").src="",document.querySelector(".thumb").style.display="none",document.querySelector(".dragUpload").classList.remove("s8"),void document.querySelector(".dragUpload").classList.add("s12");document.querySelector(".alert").style.display="none",document.querySelector(".done-drag").classList.add("green-text"),document.querySelector(".convert").classList.remove("disabled"),document.querySelector(".convert").classList.remove("grey"),document.querySelector(".convert").classList.add("green");var o=new FileReader;o.onload=function(e){var n=e.target.result;document.querySelector(".thumb").style.display="inline-block",document.querySelector(".thumb-img").src=n,document.querySelector(".dragUpload").classList.remove("s12"),document.querySelector(".dragUpload").classList.add("s8"),document.querySelector(".done-convert").classList.remove("green-text")},o.readAsDataURL(n),document.getElementById("file").value=null}u(),document.querySelector(".dragUpload").addEventListener("drop",function(e){o(null,r=e.dataTransfer.files[0])}),document.getElementById("file").addEventListener("change",o,!1),window.File&&window.FileReader&&window.FileList&&window.Blob||alert("The File APIs are not fully supported in this browser, Please update your browser or use a different one."),document.querySelector(".convert").addEventListener("click",function(){e(document.querySelector(".thumb-img").src,function(e){c(e,n).click(),document.querySelector(".done-convert").classList.add("green-text")})}),document.querySelector(".reset").addEventListener("click",function(){location.reload()})}